import{r as v,R as N}from"./index.3df4e929.js";import{s as X,b as P,o as h,C as $,S as B,y as F,u as L,L as Y,c as Z,p as U,h as _,d as ee,F as te,$ as E,e as A,f as j,g as re,i as oe,m as z,j as ne,N as ie,k as f,r as ae,l as le}from"./d560a03f.js";import{s as se}from"./67fad66f.js";function G(e,o){let[r,t]=v.exports.useState(e),n=X(e);return P(()=>t(n.current),[n,t,...o]),r}function ue(e){throw new Error("Unexpected object: "+e)}var I=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(I||{});function pe(e,o){let r=o.resolveItems();if(r.length<=0)return null;let t=o.resolveActiveIndex(),n=t!=null?t:-1,i=(()=>{switch(e.focus){case 0:return r.findIndex(a=>!o.resolveDisabled(a));case 1:{let a=r.slice().reverse().findIndex((l,p,g)=>n!==-1&&g.length-p-1>=n?!1:!o.resolveDisabled(l));return a===-1?a:r.length-1-a}case 2:return r.findIndex((a,l)=>l<=n?!1:!o.resolveDisabled(a));case 3:{let a=r.slice().reverse().findIndex(l=>!o.resolveDisabled(l));return a===-1?a:r.length-1-a}case 4:return r.findIndex(a=>o.resolveId(a)===e.id);case 5:return null;default:ue(e)}})();return i===-1?t:i}function H(e={},o=null,r=[]){for(let[t,n]of Object.entries(e))q(r,W(o,t),n);return r}function W(e,o){return e?e+"["+o+"]":o}function q(e,o,r){if(Array.isArray(r))for(let[t,n]of r.entries())q(e,W(o,t.toString()),n);else r instanceof Date?e.push([o,r.toISOString()]):typeof r=="boolean"?e.push([o,r?"1":"0"]):typeof r=="string"?e.push([o,r]):typeof r=="number"?e.push([o,`${r}`]):r==null?e.push([o,""]):H(r,o,e)}function ce(e,o,r){let[t,n]=v.exports.useState(r),i=e!==void 0;return[i?e:t,h(a=>(i||n(a),o==null?void 0:o(a)))]}var de=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(de||{}),fe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(fe||{}),ve=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ve||{}),be=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.SetDisabled=2]="SetDisabled",e[e.SetOrientation=3]="SetOrientation",e[e.GoToOption=4]="GoToOption",e[e.Search=5]="Search",e[e.ClearSearch=6]="ClearSearch",e[e.RegisterOption=7]="RegisterOption",e[e.UnregisterOption=8]="UnregisterOption",e))(be||{});function Q(e,o=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,t=le(o(e.options.slice()),i=>i.dataRef.current.domRef.current),n=r?t.indexOf(r):null;return n===-1&&(n=null),{options:t,activeOptionIndex:n}}let xe={[1](e){return e.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},[0](e){if(e.disabled||e.listboxState===0)return e;let o=e.activeOptionIndex,{value:r,mode:t,compare:n}=e.propsRef.current,i=e.options.findIndex(a=>{let l=a.dataRef.current.value;return L(t,{[1]:()=>r.some(p=>n(p,l)),[0]:()=>n(r,l)})});return i!==-1&&(o=i),{...e,listboxState:0,activeOptionIndex:o}},[2](e,o){return e.disabled===o.disabled?e:{...e,disabled:o.disabled}},[3](e,o){return e.orientation===o.orientation?e:{...e,orientation:o.orientation}},[4](e,o){var r;if(e.disabled||e.listboxState===1)return e;let t=Q(e),n=pe(o,{resolveItems:()=>t.options,resolveActiveIndex:()=>t.activeOptionIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});return{...e,...t,searchQuery:"",activeOptionIndex:n,activationTrigger:(r=o.trigger)!=null?r:1}},[5]:(e,o)=>{if(e.disabled||e.listboxState===1)return e;let r=e.searchQuery!==""?0:1,t=e.searchQuery+o.value.toLowerCase(),n=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find(a=>{var l;return!a.dataRef.current.disabled&&((l=a.dataRef.current.textValue)==null?void 0:l.startsWith(t))}),i=n?e.options.indexOf(n):-1;return i===-1||i===e.activeOptionIndex?{...e,searchQuery:t}:{...e,searchQuery:t,activeOptionIndex:i,activationTrigger:1}},[6](e){return e.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},[7]:(e,o)=>{let r={id:o.id,dataRef:o.dataRef},t=Q(e,n=>[...n,r]);if(e.activeOptionIndex===null){let{value:n,mode:i,compare:a}=e.propsRef.current,l=o.dataRef.current.value;L(i,{[1]:()=>n.some(p=>a(p,l)),[0]:()=>a(n,l)})&&(t.activeOptionIndex=t.options.indexOf(r))}return{...e,...t}},[8]:(e,o)=>{let r=Q(e,t=>{let n=t.findIndex(i=>i.id===o.id);return n!==-1&&t.splice(n,1),t});return{...e,...r,activationTrigger:1}}},K=v.exports.createContext(null);K.displayName="ListboxContext";function M(e){let o=v.exports.useContext(K);if(o===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,M),r}return o}function ge(e,o){return L(o.type,xe,e,o)}let me=v.exports.Fragment,Re=$(function(e,o){let{value:r,defaultValue:t,name:n,onChange:i,by:a=(b,x)=>b===x,disabled:l=!1,horizontal:p=!1,multiple:g=!1,...D}=e;const y=p?"horizontal":"vertical";let m=F(o),[R,c]=ce(r,i,t),d=v.exports.useReducer(ge,{listboxState:1,propsRef:{current:{value:R,onChange:c,mode:g?1:0,compare:h(typeof a=="string"?(b,x)=>{let w=a;return(b==null?void 0:b[w])===(x==null?void 0:x[w])}:a)}},labelRef:v.exports.createRef(),buttonRef:v.exports.createRef(),optionsRef:v.exports.createRef(),disabled:l,orientation:y,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1}),[{listboxState:s,propsRef:u,optionsRef:C,buttonRef:k},T]=d;u.current.value=R,u.current.mode=g?1:0,P(()=>{u.current.onChange=b=>L(u.current.mode,{[0](){return c(b)},[1](){let x=u.current.value.slice(),{compare:w}=u.current,V=x.findIndex(J=>w(J,b));return V===-1?x.push(b):x.splice(V,1),c(x)}})},[c,u]),P(()=>T({type:2,disabled:l}),[l]),P(()=>T({type:3,orientation:y}),[y]),Y([k,C],(b,x)=>{var w;T({type:1}),ne(x,ie.Loose)||(b.preventDefault(),(w=k.current)==null||w.focus())},s===0);let S=v.exports.useMemo(()=>({open:s===0,disabled:l,value:R}),[s,l,R]),O={ref:m};return N.createElement(K.Provider,{value:d},N.createElement(Z,{value:L(s,{[0]:U.Open,[1]:U.Closed})},n!=null&&R!=null&&H({[n]:R}).map(([b,x])=>N.createElement(_,{features:ee.Hidden,...te({key:b,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:b,value:x})})),E({ourProps:O,theirProps:D,slot:S,defaultTag:me,name:"Listbox"})))}),he="button",ye=$(function(e,o){var r;let[t,n]=M("Listbox.Button"),i=F(t.buttonRef,o),a=`headlessui-listbox-button-${A()}`,l=j(),p=h(d=>{switch(d.key){case f.Space:case f.Enter:case f.ArrowDown:d.preventDefault(),n({type:0}),l.nextFrame(()=>{t.propsRef.current.value||n({type:4,focus:I.First})});break;case f.ArrowUp:d.preventDefault(),n({type:0}),l.nextFrame(()=>{t.propsRef.current.value||n({type:4,focus:I.Last})});break}}),g=h(d=>{switch(d.key){case f.Space:d.preventDefault();break}}),D=h(d=>{if(ae(d.currentTarget))return d.preventDefault();t.listboxState===0?(n({type:1}),l.nextFrame(()=>{var s;return(s=t.buttonRef.current)==null?void 0:s.focus({preventScroll:!0})})):(d.preventDefault(),n({type:0}))}),y=G(()=>{if(t.labelRef.current)return[t.labelRef.current.id,a].join(" ")},[t.labelRef.current,a]),m=v.exports.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled,value:t.propsRef.current.value}),[t]),R=e,c={ref:i,id:a,type:se(e,t.buttonRef),"aria-haspopup":!0,"aria-controls":(r=t.optionsRef.current)==null?void 0:r.id,"aria-expanded":t.disabled?void 0:t.listboxState===0,"aria-labelledby":y,disabled:t.disabled,onKeyDown:p,onKeyUp:g,onClick:D};return E({ourProps:c,theirProps:R,slot:m,defaultTag:he,name:"Listbox.Button"})}),Se="label",Oe=$(function(e,o){let[r]=M("Listbox.Label"),t=`headlessui-listbox-label-${A()}`,n=F(r.labelRef,o),i=h(()=>{var l;return(l=r.buttonRef.current)==null?void 0:l.focus({preventScroll:!0})}),a=v.exports.useMemo(()=>({open:r.listboxState===0,disabled:r.disabled}),[r]);return E({ourProps:{ref:n,id:t,onClick:i},theirProps:e,slot:a,defaultTag:Se,name:"Listbox.Label"})}),Ie="ul",Pe=B.RenderStrategy|B.Static,De=$(function(e,o){var r;let[t,n]=M("Listbox.Options"),i=F(t.optionsRef,o),a=`headlessui-listbox-options-${A()}`,l=j(),p=j(),g=re(),D=(()=>g!==null?g===U.Open:t.listboxState===0)();v.exports.useEffect(()=>{var s;let u=t.optionsRef.current;!u||t.listboxState===0&&u!==((s=oe(u))==null?void 0:s.activeElement)&&u.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let y=h(s=>{switch(p.dispose(),s.key){case f.Space:if(t.searchQuery!=="")return s.preventDefault(),s.stopPropagation(),n({type:5,value:s.key});case f.Enter:if(s.preventDefault(),s.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:u}=t.options[t.activeOptionIndex];t.propsRef.current.onChange(u.current.value)}t.propsRef.current.mode===0&&(n({type:1}),z().nextFrame(()=>{var u;return(u=t.buttonRef.current)==null?void 0:u.focus({preventScroll:!0})}));break;case L(t.orientation,{vertical:f.ArrowDown,horizontal:f.ArrowRight}):return s.preventDefault(),s.stopPropagation(),n({type:4,focus:I.Next});case L(t.orientation,{vertical:f.ArrowUp,horizontal:f.ArrowLeft}):return s.preventDefault(),s.stopPropagation(),n({type:4,focus:I.Previous});case f.Home:case f.PageUp:return s.preventDefault(),s.stopPropagation(),n({type:4,focus:I.First});case f.End:case f.PageDown:return s.preventDefault(),s.stopPropagation(),n({type:4,focus:I.Last});case f.Escape:return s.preventDefault(),s.stopPropagation(),n({type:1}),l.nextFrame(()=>{var u;return(u=t.buttonRef.current)==null?void 0:u.focus({preventScroll:!0})});case f.Tab:s.preventDefault(),s.stopPropagation();break;default:s.key.length===1&&(n({type:5,value:s.key}),p.setTimeout(()=>n({type:6}),350));break}}),m=G(()=>{var s,u,C;return(C=(s=t.labelRef.current)==null?void 0:s.id)!=null?C:(u=t.buttonRef.current)==null?void 0:u.id},[t.labelRef.current,t.buttonRef.current]),R=v.exports.useMemo(()=>({open:t.listboxState===0}),[t]),c=e,d={"aria-activedescendant":t.activeOptionIndex===null||(r=t.options[t.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":t.propsRef.current.mode===1?!0:void 0,"aria-labelledby":m,"aria-orientation":t.orientation,id:a,onKeyDown:y,role:"listbox",tabIndex:0,ref:i};return E({ourProps:d,theirProps:c,slot:R,defaultTag:Ie,features:Pe,visible:D,name:"Listbox.Options"})}),Le="li",Ce=$(function(e,o){let{disabled:r=!1,value:t,...n}=e,[i,a]=M("Listbox.Option"),l=`headlessui-listbox-option-${A()}`,p=i.activeOptionIndex!==null?i.options[i.activeOptionIndex].id===l:!1,{value:g,compare:D}=i.propsRef.current,y=L(i.propsRef.current.mode,{[1]:()=>g.some(S=>D(S,t)),[0]:()=>D(g,t)}),m=v.exports.useRef(null),R=F(o,m);P(()=>{if(i.listboxState!==0||!p||i.activationTrigger===0)return;let S=z();return S.requestAnimationFrame(()=>{var O,b;(b=(O=m.current)==null?void 0:O.scrollIntoView)==null||b.call(O,{block:"nearest"})}),S.dispose},[m,p,i.listboxState,i.activationTrigger,i.activeOptionIndex]);let c=v.exports.useRef({disabled:r,value:t,domRef:m});P(()=>{c.current.disabled=r},[c,r]),P(()=>{c.current.value=t},[c,t]),P(()=>{var S,O;c.current.textValue=(O=(S=m.current)==null?void 0:S.textContent)==null?void 0:O.toLowerCase()},[c,m]);let d=h(()=>i.propsRef.current.onChange(t));P(()=>(a({type:7,id:l,dataRef:c}),()=>a({type:8,id:l})),[c,l]);let s=h(S=>{if(r)return S.preventDefault();d(),i.propsRef.current.mode===0&&(a({type:1}),z().nextFrame(()=>{var O;return(O=i.buttonRef.current)==null?void 0:O.focus({preventScroll:!0})}))}),u=h(()=>{if(r)return a({type:4,focus:I.Nothing});a({type:4,focus:I.Specific,id:l})}),C=h(()=>{r||p||a({type:4,focus:I.Specific,id:l,trigger:0})}),k=h(()=>{r||!p||a({type:4,focus:I.Nothing})}),T=v.exports.useMemo(()=>({active:p,selected:y,disabled:r}),[p,y,r]);return E({ourProps:{id:l,ref:R,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":y,disabled:void 0,onClick:s,onFocus:u,onPointerMove:C,onMouseMove:C,onPointerLeave:k,onMouseLeave:k},theirProps:n,slot:T,defaultTag:Le,name:"Listbox.Option"})}),$e=Object.assign(Re,{Button:ye,Label:Oe,Options:De,Option:Ce});export{$e as p};
//# sourceMappingURL=2276b12d.js.map
