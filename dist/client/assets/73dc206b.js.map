{"version":3,"file":"73dc206b.js","sources":["../../../node_modules/@shopify/hydrogen/dist/esnext/foundation/Analytics/connectors/PerformanceMetrics/PerformanceMetrics.client.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { loadScript } from '../../../../utilities/load_script.js';\nimport { ClientAnalytics } from '../../ClientAnalytics.js';\nimport { useShop } from '../../../useShop/index.js';\nconst URL = 'https://cdn.shopify.com/shopifycloud/boomerang/shopify-boomerang-hydrogen.min.js';\nexport function PerformanceMetrics() {\n    const { storeDomain } = useShop();\n    useEffect(() => {\n        try {\n            (function () {\n                if (window.BOOMR &&\n                    (window.BOOMR.version || window.BOOMR.snippetExecuted)) {\n                    return;\n                }\n                // Executes only on first mount\n                window.BOOMR = window.BOOMR || {};\n                window.BOOMR.hydrogenPerformanceEvent = (data) => {\n                    const initTime = new Date().getTime();\n                    ClientAnalytics.publish(ClientAnalytics.eventNames.PERFORMANCE, true, data);\n                    const pageData = ClientAnalytics.getPageAnalyticsData();\n                    const shopId = pageData.shopify?.shopId;\n                    fetch('https://monorail-edge.shopifysvc.com/v1/produce', {\n                        method: 'post',\n                        headers: {\n                            'content-type': 'text/plain',\n                        },\n                        body: JSON.stringify({\n                            schema_id: 'hydrogen_buyer_performance/2.0',\n                            payload: {\n                                ...data,\n                                shop_id: shopId\n                                    ? shopId.substring(shopId.lastIndexOf('/') + 1)\n                                    : '',\n                            },\n                            metadata: {\n                                event_created_at_ms: initTime,\n                                event_sent_at_ms: new Date().getTime(),\n                            },\n                        }),\n                    });\n                };\n                window.BOOMR.storeDomain = storeDomain;\n                function boomerangSaveLoadTime(e) {\n                    window.BOOMR_onload = (e && e.timeStamp) || Date.now();\n                }\n                // @ts-ignore\n                function boomerangInit(e) {\n                    e.detail.BOOMR.init();\n                    e.detail.BOOMR.t_end = Date.now();\n                }\n                if (window.addEventListener) {\n                    window.addEventListener('load', boomerangSaveLoadTime, false);\n                    // @ts-ignore\n                }\n                else if (window.attachEvent) {\n                    // @ts-ignore\n                    window.attachEvent('onload', boomerangSaveLoadTime);\n                }\n                if (document.addEventListener) {\n                    document.addEventListener('onBoomerangLoaded', boomerangInit);\n                    // @ts-ignore\n                }\n                else if (document.attachEvent) {\n                    // @ts-ignore\n                    document.attachEvent('onpropertychange', function (e) {\n                        if (!e)\n                            e = event;\n                        if (e.propertyName === 'onBoomerangLoaded')\n                            boomerangInit(e);\n                    });\n                }\n            })();\n            loadScript(URL).catch(() => {\n                // ignore if boomerang doesn't load\n                // most likely because of an ad blocker\n            });\n        }\n        catch (err) {\n            // Do nothing\n        }\n    }, [storeDomain]);\n    return null;\n}\n"],"names":["URL","PerformanceMetrics","storeDomain","useShop","useEffect","data","initTime","ClientAnalytics","shopId","_a","boomerangSaveLoadTime","boomerangInit","loadScript"],"mappings":"+JAIA,MAAMA,EAAM,mFACL,SAASC,GAAqB,CACjC,KAAM,CAAE,YAAAC,GAAgBC,IACxBC,OAAAA,EAAAA,QAAAA,UAAU,IAAM,CACZ,GAAI,EACC,UAAY,CACT,GAAI,OAAO,QACN,OAAO,MAAM,SAAW,OAAO,MAAM,iBACtC,OAGJ,OAAO,MAAQ,OAAO,OAAS,CAAA,EAC/B,OAAO,MAAM,yBAA4BC,GAAS,OAC9C,MAAMC,EAAW,IAAI,KAAM,EAAC,QAAO,EACnCC,EAAgB,QAAQA,EAAgB,WAAW,YAAa,GAAMF,CAAI,EAE1E,MAAMG,GAASC,EADEF,EAAgB,uBACT,UAAT,YAAAE,EAAkB,OACjC,MAAM,kDAAmD,CACrD,OAAQ,OACR,QAAS,CACL,eAAgB,YACnB,EACD,KAAM,KAAK,UAAU,CACjB,UAAW,iCACX,QAAS,CACL,GAAGJ,EACH,QAASG,EACHA,EAAO,UAAUA,EAAO,YAAY,GAAG,EAAI,CAAC,EAC5C,EACT,EACD,SAAU,CACN,oBAAqBF,EACrB,iBAAkB,IAAI,KAAM,EAAC,QAAS,CACzC,CAC7B,CAAyB,CACzB,CAAqB,CACrB,EACgB,OAAO,MAAM,YAAcJ,EAC3B,SAASQ,EAAsB,EAAG,CAC9B,OAAO,aAAgB,GAAK,EAAE,WAAc,KAAK,KACpD,CAED,SAASC,EAAc,EAAG,CACtB,EAAE,OAAO,MAAM,OACf,EAAE,OAAO,MAAM,MAAQ,KAAK,IAAG,CAClC,CACG,OAAO,iBACP,OAAO,iBAAiB,OAAQD,EAAuB,EAAK,EAGvD,OAAO,aAEZ,OAAO,YAAY,SAAUA,CAAqB,EAElD,SAAS,iBACT,SAAS,iBAAiB,oBAAqBC,CAAa,EAGvD,SAAS,aAEd,SAAS,YAAY,mBAAoB,SAAU,EAAG,CAC7C,IACD,EAAI,OACJ,EAAE,eAAiB,qBACnBA,EAAc,CAAC,CAC3C,CAAqB,CAErB,KACYC,EAAWZ,CAAG,EAAE,MAAM,IAAM,CAGxC,CAAa,CACJ,MACD,CAEC,CACT,EAAO,CAACE,CAAW,CAAC,EACT,IACX"}