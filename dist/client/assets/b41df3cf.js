import{R as v,r as i,a as N,F as O,j as P,b as W}from"./index.3df4e929.js";import{u as x,c as f,a as A}from"./85933035.js";import{u as U,b as J}from"./1745953b.js";import{useBasePath as $}from"./33faabbc.js";import"./8c31b2d6.js";const H=v.forwardRef(function(t,o){var T,g;const n=U(),a=x(),[d,u]=v.useTransition(),E=$(),[C,R]=i.exports.useState(!1),[S,p]=i.exports.useState(!1),{reloadDocument:b,target:l,replace:k,onClick:h,clientState:y,prefetch:L=!0,scroll:M=!0}=t,r=J((T=t.basePath)!=null?T:E,t.to),B=i.exports.useCallback(s=>{if(h&&h(s),!b&&s.button===0&&(!l||l==="_self")&&!z(s)){s.preventDefault();const D=!!k||f(a)===f({pathname:r});n(r,{replace:D,scroll:M,clientState:y,basePath:"/"})}},[h,b,l,k,a,r,n,y,M]),m=()=>{u(()=>{L&&!!r&&p(!0)})},w=()=>{u(()=>{L&&p(!1)})};i.exports.useEffect(()=>{if(S){const s=setTimeout(()=>{R(!0)},100);return()=>{clearTimeout(s)}}},[S]);const F=c(t.onMouseEnter,m),j=c(t.onMouseLeave,w),I=c(t.onFocus,m),K=c(t.onBlur,w),_=c(t.onTouchStart,m);return N(O,{children:[P("a",{...G(t,["to","replace","clientState","reloadDocument","prefetch","scroll"]),ref:o,rel:(g=t.rel)!=null?g:r.startsWith("http")||r.startsWith("//")?"noreferrer noopener":void 0,onClick:B,onMouseEnter:F,onMouseLeave:j,onFocus:I,onBlur:K,onTouchStart:_,href:r,children:t.children}),C&&P(q,{pathname:r})]})});function q({pathname:e}){const{getProposedLocationServerProps:t}=A(),o=x(),n=f({pathname:e});if(e.startsWith("http")||n===f(o))return null;const a=new URL(n,window.location.href),d=t({pathname:a.pathname,search:a.search}),u=`${W}?state=`+encodeURIComponent(JSON.stringify(d));return P("link",{rel:"prefetch",as:"fetch",href:u})}function c(e,t){return o=>{e==null||e(o),o.defaultPrevented||t(o)}}function z(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function G(e,t){const o={};for(const n of Object.keys(e))t.includes(n)||(o[n]=e[n]);return o}export{H as Link,c as composeEventHandlers};
//# sourceMappingURL=b41df3cf.js.map
