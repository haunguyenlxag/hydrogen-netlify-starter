import"./b41df3cf.js";import{r as a,a as l,F as M,j as e}from"./index.3df4e929.js";import"./c84c5730.js";import"./70104689.js";import"./85933035.js";import"./651ab248.js";import"./e5634198.js";import{Seo as I}from"./2d31c444.js";import"./969196d1.js";import"./33faabbc.js";import{u as H,e as J,p as D}from"./94ad6cc2.js";import{g as c}from"./6eb8b136.js";import{B as L}from"./59e21d41.js";import{T as f}from"./d52eab33.js";import"./d560a03f.js";/* empty css        */import{M as O}from"./0cb46459.js";import"./1745953b.js";import"./8c31b2d6.js";import"./92add5bc.js";import"./6a41f177.js";import"./4e9f3bc7.js";import"./d6282b27.js";import"./83de93b9.js";import"./dfd7fee0.js";function _({firstName:t="",lastName:n="",phone:s="",email:i="",close:m}){const[d,o]=a.exports.useState(!1),[v,k]=a.exports.useState(t),[b,R]=a.exports.useState(n),[P,U]=a.exports.useState(s),[y,V]=a.exports.useState(i),[x,E]=a.exports.useState(null),[C,S]=a.exports.useState(null),[T,A]=a.exports.useState(null),[u,j]=a.exports.useState(null),[F,$]=a.exports.useState(null),q=H();async function B(r){r.preventDefault(),E(null),S(null),A(null),j(null);const N=J(r.currentTarget.email);N&&E(N);let p,h,w;if(r.currentTarget.currentPassword.value&&(p=D(r.currentTarget.currentPassword),p&&S(p),h=D(r.currentTarget.newPassword),h&&A(h),w=r.currentTarget.newPassword.value!==r.currentTarget.newPassword2.value?"The two passwords entered did not match":null,w&&j(w)),N||p||h||w)return;o(!0);const z=await G({email:y,newPassword:r.currentTarget.newPassword.value,currentPassword:r.currentTarget.currentPassword.value,phone:P,firstName:v,lastName:b});if(o(!1),z.error){$(z.error);return}q(),m()}return l(M,{children:[e(f,{className:"mt-4 mb-6",as:"h3",size:"lead",children:"Update your profile"}),l("form",{noValidate:!0,onSubmit:B,children:[F&&e("div",{className:"flex items-center justify-center mb-6 bg-red-100 rounded",children:e("p",{className:"m-4 text-sm text-red-900",children:F})}),e("div",{className:"mt-3",children:e("input",{className:c(),id:"firstname",name:"firstname",type:"text",autoComplete:"given-name",placeholder:"First name","aria-label":"First name",value:v,onChange:r=>{k(r.target.value)}})}),e("div",{className:"mt-3",children:e("input",{className:c(),id:"lastname",name:"lastname",type:"text",autoComplete:"family-name",placeholder:"Last name","aria-label":"Last name",value:b,onChange:r=>{R(r.target.value)}})}),e("div",{className:"mt-3",children:e("input",{className:c(),id:"phone",name:"phone",type:"tel",autoComplete:"tel",placeholder:"Mobile","aria-label":"Mobile",value:P,onChange:r=>{U(r.target.value)}})}),l("div",{className:"mt-3",children:[e("input",{className:c(x),id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"Email address","aria-label":"Email address",value:y,onChange:r=>{V(r.target.value)}}),l("p",{className:`text-red-500 text-xs ${x?"":"invisible"}`,children:[x," \xA0"]})]}),e(f,{className:"mb-6 mt-6",as:"h3",size:"lead",children:"Change your password"}),e(g,{name:"currentPassword",label:"Current password",passwordError:C}),e(g,{name:"newPassword",label:"New password",passwordError:T}),e(g,{name:"newPassword2",label:"Re-enter new password",passwordError:u}),e(f,{size:"fine",color:"subtle",className:`mt-1 ${C||T?"text-red-500":""}`,children:"Passwords must be at least 6 characters."}),u?e("br",{}):null,l(f,{size:"fine",className:`mt-1 text-red-500 ${u?"":"invisible"}`,children:[u," \xA0"]}),e("div",{className:"mt-6",children:e(L,{className:"text-sm mb-2",variant:"primary",width:"full",type:"submit",disabled:d,children:"Save"})}),e("div",{className:"mb-4",children:e(L,{type:"button",className:"text-sm",variant:"secondary",width:"full",onClick:m,children:"Cancel"})})]})]})}function g({name:t,passwordError:n,label:s}){const[i,m]=a.exports.useState("");return e("div",{className:"mt-3",children:e("input",{className:c(n),id:t,name:t,type:"password",autoComplete:t==="currentPassword"?"current-password":void 0,placeholder:s,"aria-label":s,value:i,minLength:8,required:!0,onChange:d=>{m(d.target.value)}})})}async function G({email:t,phone:n,firstName:s,lastName:i,currentPassword:m,newPassword:d}){try{const o=await fetch("/account",{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,phone:n,firstName:s,lastName:i,currentPassword:m,newPassword:d})});return o.ok?{}:o.json()}catch{return{error:"Error saving account. Please try again."}}}function ge({firstName:t,lastName:n,phone:s,email:i}){const[m,d]=a.exports.useState(!1),o=()=>d(!1);return l(M,{children:[m?l(O,{close:o,children:[e(I,{type:"noindex",data:{title:"Account details"}}),e(_,{firstName:t,lastName:n,phone:s,email:i,close:o})]}):null,l("div",{className:"grid w-full gap-4 p-4 py-6 md:gap-8 md:p-8 lg:p-12",children:[e("h3",{className:"font-bold text-lead",children:"Account Details"}),l("div",{className:"lg:p-8 p-6 border border-gray-200 rounded",children:[l("div",{className:"flex",children:[e("h3",{className:"font-bold text-base flex-1",children:"Profile & Security"}),e("button",{className:"underline text-sm font-normal",onClick:()=>d(!0),children:"Edit"})]}),e("div",{className:"mt-4 text-sm text-primary/50",children:"Name"}),l("p",{className:"mt-1",children:[t||n?(t?t+" ":"")+n:"Add name"," "]}),e("div",{className:"mt-4 text-sm text-primary/50",children:"Contact"}),e("p",{className:"mt-1",children:s!=null?s:"Add mobile"}),e("div",{className:"mt-4 text-sm text-primary/50",children:"Email address"}),e("p",{className:"mt-1",children:i}),e("div",{className:"mt-4 text-sm text-primary/50",children:"Password"}),e("p",{className:"mt-1",children:"**************"})]})]})]})}export{ge as AccountDetails};
//# sourceMappingURL=1d5a1920.js.map
